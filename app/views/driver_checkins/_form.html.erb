<button onclick="getLocation()">Get Location</button>

<p id="demo"></p>

<script>
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    x.innerHTML = "Latitude: " + position.coords.latitude + 
    "<br>Longitude: " + position.coords.longitude;
}

var latitude = position.coords.latitude;
var longitude = position.coords.latitude; 

$.ajax({
        url: "/driver_user_newcoords_path?latitude="+latitude+"&longitude="+longitude,
        success: function(data) {
            // do something here like for example replace some arbitrary container's html with the stuff returned by server.
            $("#container").html(data);
        }
    });
</script>


<% if current_driver_user %>
<%= simple_form_for [@driver, @driver_checkin] do |f| %>  



  <p>IP <%= request.remote_ip %></p>

  
  
  <div class="form-inputs">
    <%= f.input :street %>
    <%= f.input :city, input_html: { value: @city } %> 
    <%= f.input :state, label: "Region",  input_html: { value: @region } %>
    <%= f.input :zip, input_html: { value: @postal_code }  %> 
    <%= f.input :ip_address, input_html: { value: @ip } %>
    <%= f.input :latitude, input_html: { value: @lat } %> 
    <%= f.input :longitude, input_html: { value: @lon } %>
    <%= f.input :status %>
    <%= f.input :notes %> 
    <%= f.input :driver_user_id %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>

<% end %>
<% end %>
--------------------------------------------------
